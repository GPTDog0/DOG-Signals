<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pocket Option Signals</title>
<style>
body { font-family: Arial; background:#0f172a; color:white; margin:0; padding:0; }
.container { max-width:1000px; margin:20px auto; padding:20px; background:#1e293b; border-radius:16px; }
h2 { text-align:center; color:#38bdf8; }
select { padding:8px; margin:10px; border-radius:8px; border:none; font-size:16px; }
.table { width:100%; border-collapse: collapse; margin-top:20px; }
.table th, .table td { padding:10px; border:1px solid #334155; text-align:center; }
.signal-positive { color:#22c55e; font-weight:bold; }
.signal-negative { color:#ef4444; font-weight:bold; }
.signal-neutral { color:#facc15; font-weight:bold; }
canvas { background:#0f172a; border-radius:16px; }
</style>
</head>
<body>
<div class="container">
<h2>üî• –°–∏–≥–Ω–∞–ª—ã Pocket Option</h2>

<!-- –í—ã–±–æ—Ä –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã –∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ -->
<div style="text-align:center;">
<select id="pairSelect">
<option>EUR/USD</option>
<option>GBP/USD</option>
<option>USD/JPY</option>
<option>AUD/USD</option>
<option>USD/CAD</option>
<option>NZD/USD</option>
<option>CHF/JPY</option>
<option>EUR/GBP</option>
</select>

<select id="tfSelect">
<option>1m</option>
<option>3m</option>
<option>5m</option>
</select>
</div>

<table class="table">
<thead>
<tr>
<th>–í–∞–ª—é—Ç–∞</th>
<th>–¢–∞–π–º—Ñ—Ä–µ–π–º</th>
<th>–¢–∞–π–º–µ—Ä</th>
<th>–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞</th>
<th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
</tr>
</thead>
<tbody id="signals-body"></tbody>
</table>

<h2>üìà –ì—Ä–∞—Ñ–∏–∫</h2>
<div id="tv_chart_container" style="height:400px;"></div>
</div>

<!-- TradingView Widget -->
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

<script>
// –ü—Ä–∏–º–µ—Ä –¥–µ–º–æ-—Å–∏–≥–Ω–∞–ª–∞
let currentSignal = {
    pair: "EUR/USD",
    tf: "1m",
    entry: "1.0932",
    duration: 60, // —Å–µ–∫
    result: null
};

const signalsBody = document.getElementById("signals-body");
const pairSelect = document.getElementById("pairSelect");
const tfSelect = document.getElementById("tfSelect");

function startSignal(){
    signalsBody.innerHTML = "";
    currentSignal.pair = pairSelect.value;
    currentSignal.tf = tfSelect.value;
    currentSignal.result = null;
    currentSignal.endTime = Date.now() + currentSignal.duration*1000;

    const tr = document.createElement("tr");
    const timerCell = document.createElement("td");
    tr.innerHTML = `
        <td>${currentSignal.pair}</td>
        <td>${currentSignal.tf}</td>
    `;
    tr.appendChild(timerCell);
    tr.innerHTML += `<td>${currentSignal.entry}</td><td class="signal-neutral">...</td>`;
    signalsBody.appendChild(tr);

    // –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    const interval = setInterval(()=>{
        const remaining = Math.max(0, Math.ceil((currentSignal.endTime - Date.now())/1000));
        timerCell.textContent = `00:${remaining<10?'0':''}${remaining}`;
        if(remaining<=0){
            clearInterval(interval);
            // –ü—Ä–∏–º–µ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const res = ["+","-","‚Ü∫"];
            const r = res[Math.floor(Math.random()*res.length)];
            tr.children[4].textContent = r;
            tr.children[4].className = r=="+"?"signal-positive":r=="-"?"signal-negative":"signal-neutral";
        }
    }, 1000);
}

// –ó–∞–ø—É—Å–∫ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä—ã –∏–ª–∏ tf
pairSelect.addEventListener("change", startSignal);
tfSelect.addEventListener("change", startSignal);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TradingView
function loadTradingView(){
    new TradingView.widget({
      "container_id": "tv_chart_container",
      "symbol": currentSignal.pair.replace("/",""),
      "interval": currentSignal.tf,
      "timezone": "Etc/UTC",
      "theme": "dark",
      "style": "1",
      "locale": "ru",
      "toolbar_bg": "#1e293b",
      "enable_publishing": false,
      "hide_side_toolbar": false,
      "allow_symbol_change": true,
      "save_image": false
    });
}

pairSelect.addEventListener("change", loadTradingView);
tfSelect.addEventListener("change", loadTradingView);

startSignal();
loadTradingView();
</script>
</body>
</html>

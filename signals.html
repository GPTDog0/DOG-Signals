<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pocket Option Signals</title>
<style>
body { font-family: 'Arial', sans-serif; background:#0b0f1a; color:white; margin:0; padding:0; }
.container { max-width:430px; margin:10px auto; padding:15px; background:#111827; border-radius:16px; text-align:center; }
h2 { color:#0ef; margin-bottom:15px; }
select, button { padding:10px; margin:5px; border-radius:8px; border:none; font-size:16px; cursor:pointer; }
button { background:#1e40af; color:white; font-weight:bold; }
button:hover { background:#2563eb; }
button:disabled { background:#64748b; cursor:not-allowed; }
.signal-box { margin-top:20px; padding:20px; border-radius:12px; background:#1f2937; font-size:18px; min-height:80px; display:flex; justify-content:center; align-items:center; }
.signal-positive { color:#22c55e; font-weight:bold; }
.signal-negative { color:#ef4444; font-weight:bold; }
.signal-neutral { color:#facc15; font-weight:bold; }

/* –ì—Ä–∞—Ñ–∏–∫ –ø–æ–¥ iPhone 16 Pro */
#tv_chart_container { width:100%; height:400px; margin-top:20px; display:none; border-radius:12px; }
@media (max-width:430px){
  #tv_chart_container { height:350px; }
}

.loader { border: 4px solid #f3f3f3; border-top: 4px solid #2563eb; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin:auto; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
</head>
<body>
<div class="container">
<h2>üî• –°–∏–≥–Ω–∞–ª—ã Pocket Option</h2>

<select id="pairSelect">
<option>EUR/USD</option>
<option>GBP/USD</option>
<option>USD/JPY</option>
<option>AUD/USD</option>
<option>USD/CAD</option>
<option>NZD/USD</option>
<option>CHF/JPY</option>
<option>EUR/GBP</option>
<option>EUR/JPY</option>
<option>GBP/JPY</option>
<option>AUD/JPY</option>
<option>CAD/JPY</option>
<option>NZD/JPY</option>
<option>GBP/CHF</option>
<option>EUR/CHF</option>
</select>

<select id="tfSelect">
<option>1m</option>
<option>3m</option>
<option>5m</option>
</select>

<br>
<button id="getSignalBtn">–ü–æ–ª—É—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>
<button id="resetSignalBtn">–°–±—Ä–æ—Å–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>

<div class="signal-box" id="signalDisplay">
<p>–°–∏–≥–Ω–∞–ª –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
</div>

<div id="tv_chart_container"></div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
const demoSignals = [
    {entry:"1.0932", duration:60},
    {entry:"1.2720", duration:90},
    {entry:"145.60", duration:120},
    {entry:"0.7125", duration:75},
    {entry:"1.3350", duration:50}
];

let currentSignal = null;
let timerInterval = null;

const pairSelect = document.getElementById("pairSelect");
const tfSelect = document.getElementById("tfSelect");
const signalDisplay = document.getElementById("signalDisplay");
const getSignalBtn = document.getElementById("getSignalBtn");
const resetSignalBtn = document.getElementById("resetSignalBtn");
const chartContainer = document.getElementById("tv_chart_container");

let tvWidget = null;

function loadTradingView(pair, tf){
    chartContainer.style.display = "block";
    if(tvWidget) tvWidget.remove();
    tvWidget = new TradingView.widget({
        "container_id": "tv_chart_container",
        "symbol": pair.replace("/",""),
        "interval": tf,
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "ru",
        "toolbar_bg": "#1e293b",
        "enable_publishing": false,
        "hide_side_toolbar": false,
        "allow_symbol_change": true,
        "save_image": false
    });
}

function startSignal(signal){
    currentSignal = signal;
    getSignalBtn.disabled = true;
    pairSelect.disabled = true;
    tfSelect.disabled = true;

    // –ó–∞–≥—Ä—É–∑–∫–∞
    signalDisplay.innerHTML = '<div class="loader"></div>';
    chartContainer.style.display = "none";

    setTimeout(()=>{
        const pair = pairSelect.value;
        const tf = tfSelect.value;
        const endTime = Date.now() + signal.duration*1000;

        function updateTimer(){
            const remaining = Math.max(0, Math.ceil((endTime - Date.now())/1000));
            if(remaining <= 0){
                clearInterval(timerInterval);
                const results = ["+","-","‚Ü∫"];
                const r = results[Math.floor(Math.random()*results.length)];
                let className = r==="+"?"signal-positive":r==="-"?"signal-negative":"signal-neutral";
                signalDisplay.innerHTML = `<p>–ü–∞—Ä–∞: ${pair} | TF: ${tf}</p>
                                           <p>–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: ${signal.entry}</p>
                                           <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: <span class="${className}">${r}</span></p>`;
            } else {
                signalDisplay.innerHTML = `<p>–ü–∞—Ä–∞: ${pair} | TF: ${tf}</p>
                                           <p>–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: ${signal.entry}</p>
                                           <p>–¢–∞–π–º–µ—Ä: 00:${remaining<10?'0':''+remaining}</p>`;
            }
        }

        updateTimer();
        timerInterval = setInterval(updateTimer, 1000);

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥—Ä–∞—Ñ–∏–∫ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞
        loadTradingView(pair, tf);
    }, 1000); // –∏–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
}

// –ö–Ω–æ–ø–∫–∏
getSignalBtn.addEventListener("click", ()=>{
    if(timerInterval) clearInterval(timerInterval);
    const randomSignal = demoSignals[Math.floor(Math.random()*demoSignals.length)];
    startSignal(randomSignal);
});

resetSignalBtn.addEventListener("click", ()=>{
    if(timerInterval) clearInterval(timerInterval);
    signalDisplay.innerHTML = "<p>–°–∏–≥–Ω–∞–ª –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>";
    chartContainer.style.display = "none";
    currentSignal = null;
    getSignalBtn.disabled = false;
    pairSelect.disabled = false;
    tfSelect.disabled = false;
});
</script>
</body>
</html>

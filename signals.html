<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DOG Signals | Pocket Option</title>
<style>
  body {
    font-family: "Inter", sans-serif;
    background: radial-gradient(circle at center, #180000 0%, #000 90%);
    color: #f4f4f4;
    text-align: center;
    margin: 0;
    padding: 0 5px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 100vh;
  }

  h1 {
    color: #ff2e2e;
    font-weight: 800;
    font-size: 24px;
    margin: 20px 0 10px;
    text-shadow: 0 0 10px #ff0000aa;
    letter-spacing: 1px;
  }

  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    margin-top: 10px;
  }

  select, button {
    background: linear-gradient(180deg, #1a0000 0%, #000 100%);
    border: 1px solid #ff0000;
    color: #ffcccc;
    padding: 10px;
    border-radius: 8px;
    font-size: 15px;
    width: 220px;
    transition: all 0.3s ease;
    box-shadow: 0 0 10px #ff000055;
  }

  select:focus, button:focus {
    outline: none;
    box-shadow: 0 0 15px #ff0000aa;
  }

  select:disabled, button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  button:hover:not(:disabled) {
    background: #ff0000;
    color: #fff;
    box-shadow: 0 0 20px #ff0000aa;
  }

  #signalDisplay {
    margin-top: 15px;
    min-height: 90px;
    color: #fff;
    text-shadow: 0 0 10px #ff000055;
  }

  .signal-line {
    font-size: 15px;
    margin: 4px 0;
  }

  .result-plus { color: #4ade80; font-weight: 700; }
  .result-minus { color: #ef4444; font-weight: 700; }
  .result-dogon { color: #facc15; font-weight: 700; }

  /* === üìä TradingView Chart === */
  #tv_chart_container {
    width: 100%;
    max-width: 420px;
    height: 280px;
    margin: 15px auto 20px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 25px #ff000033;
    background: #0a0000;
    border: 1px solid #330000;
    transition: all 0.3s ease;
  }

  @media (max-width: 480px) {
    #tv_chart_container {
      width: 96%;
      height: 250px;
      margin: 10px auto;
      border-radius: 10px;
    }

    body {
      padding: 0 4px;
    }

    button, select {
      width: 90%;
      max-width: 320px;
    }
  }

  @media (min-width: 768px) {
    #tv_chart_container {
      max-width: 500px;
      height: 300px;
    }
  }

  footer {
    padding: 10px;
    font-size: 12px;
    color: #ff4444;
    opacity: 0.7;
  }
</style>
<script src="https://s3.tradingview.com/tv.js"></script>
</head>
<body>

<h1>üê∂ DOG SIGNALS</h1>
<div class="container">
  <select id="pairSelect">
    <option>EUR/USD</option>
    <option>GBP/USD</option>
    <option>USD/JPY</option>
    <option>USD/CHF</option>
    <option>AUD/USD</option>
    <option>NZD/USD</option>
    <option>EUR/JPY</option>
    <option>GBP/JPY</option>
    <option>EUR/GBP</option>
  </select>

  <select id="tfSelect">
    <option value="3m">3M</option>
    <option value="5m">5M</option>
    <option value="7m">7M</option>
  </select>

  <button id="getSignalBtn">üî• –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–∏–≥–Ω–∞–ª</button>
  <button id="resetSignalBtn" disabled>–°–∫–∏–Ω—É—Ç–∏ —Å–∏–≥–Ω–∞–ª</button>
</div>

<div id="signalDisplay"></div>

<div id="tv_chart_container"></div>

<footer>¬© 2025 DOG Signals | Powered by Pocket Option</footer>

<script>
let timerInterval = null;
let tvWidget = null;

function tvSymbolFromPair(pair) {
  return `FX:${pair.replace('/', '').toUpperCase()}`;
}

function tvIntervalFromTF(tf) {
  const map = { '3m':'3', '5m':'5', '7m':'7' };
  return map[tf] || '3';
}

function loadTradingView(pair, tf) {
  const symbol = tvSymbolFromPair(pair);
  const interval = tvIntervalFromTF(tf);
  const container = document.getElementById("tv_chart_container");
  container.innerHTML = '';

  try {
    tvWidget = new TradingView.widget({
      container_id: "tv_chart_container",
      symbol: symbol,
      interval: interval,
      timezone: "Etc/UTC",
      theme: "dark",
      style: "1",
      locale: "ru",
      allow_symbol_change: false,
      hide_side_toolbar: true,
      hide_legend: true,
      hide_top_toolbar: true
    });
  } catch(err) {
    container.innerHTML = `<div style="padding:12px;color:#ffaaaa">–ü–æ–º–∏–ª–∫–∞: ${err.message}</div>`;
  }
}

function getRandomSignal() {
  const entries = ["UP ‚Üë", "DOWN ‚Üì"];
  const entry = entries[Math.floor(Math.random() * entries.length)];
  const duration = 60;
  return { entry, duration };
}

document.getElementById("getSignalBtn").onclick = () => {
  const signal = getRandomSignal();
  const btnGet = document.getElementById("getSignalBtn");
  const btnReset = document.getElementById("resetSignalBtn");
  const pairSelect = document.getElementById("pairSelect");
  const tfSelect = document.getElementById("tfSelect");

  btnGet.disabled = true;
  pairSelect.disabled = true;
  tfSelect.disabled = true;
  btnReset.disabled = true;

  document.getElementById("signalDisplay").innerHTML = `
    <div style="padding:20px;color:#ff6666;">‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–∏–≥–Ω–∞–ª—É...</div>
  `;

  setTimeout(()=>{
    startSignal(signal);
    btnReset.disabled = false;
  }, 1200);
};

function startSignal(signal){
  const pair = document.getElementById("pairSelect").value;
  const tf = document.getElementById("tfSelect").value;
  const display = document.getElementById("signalDisplay");

  const endTime = Date.now() + signal.duration * 1000;

  function tick(){
    const remaining = Math.max(0, Math.ceil((endTime - Date.now())/1000));
    if (remaining <= 0) {
      clearInterval(timerInterval);
      const results = ['+', '-'];
      const r = results[Math.floor(Math.random()*results.length)];
      display.innerHTML = `
        <div class="signal-line">–ü–∞—Ä–∞: ${pair} ¬∑ TF: ${tf}</div>
        <div class="signal-line">–¢–æ—á–∫–∞ –≤—Ö–æ–¥—É: ${signal.entry}</div>
        <div class="signal-line">
          ${r === '+' ? '<span class="result-plus">‚úÖ + (–ø—Ä–∏–±—É—Ç–æ–∫)</span>' : '<span class="result-dogon">‚ùå –î–æ–≥–æ–Ω</span>'}
        </div>
      `;
    } else {
      display.innerHTML = `
        <div class="signal-line">–ü–∞—Ä–∞: ${pair} ¬∑ TF: ${tf}</div>
        <div class="signal-line">–¢–æ—á–∫–∞ –≤—Ö–æ–¥—É: ${signal.entry}</div>
        <div class="signal-line">–¢–∞–π–º–µ—Ä: 00:${remaining < 10 ? '0'+remaining : remaining}</div>
      `;
    }
  }

  tick();
  timerInterval = setInterval(tick, 1000);
  loadTradingView(pair, tf);
}

document.getElementById("resetSignalBtn").onclick = () => {
  clearInterval(timerInterval);
  document.getElementById("signalDisplay").innerHTML = '';
  document.getElementById("tv_chart_container").innerHTML = '';
  document.getElementById("getSignalBtn").disabled = false;
  document.getElementById("pairSelect").disabled = false;
  document.getElementById("tfSelect").disabled = false;
  document.getElementById("resetSignalBtn").disabled = true;
};
</script>
</body>
</html>

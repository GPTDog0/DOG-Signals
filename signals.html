<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pocket Option Signals</title>
<style>
body { font-family: Arial; background:#0f172a; color:white; margin:0; padding:0; }
.container { max-width:1000px; margin:20px auto; padding:20px; background:#1e293b; border-radius:16px; text-align:center; }
h2 { color:#38bdf8; }
select, button { padding:10px; margin:10px; border-radius:8px; border:none; font-size:16px; cursor:pointer; }
button { background:#3b82f6; color:white; font-weight:bold; }
button:hover { background:#2563eb; }
button:disabled { background:#64748b; cursor:not-allowed; }
.signal-box { margin-top:20px; padding:15px; border-radius:12px; background:#334155; font-size:18px; }
.signal-positive { color:#22c55e; font-weight:bold; }
.signal-negative { color:#ef4444; font-weight:bold; }
.signal-neutral { color:#facc15; font-weight:bold; }

/* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
#tv_chart_container { width: 100%; max-width:1000px; height:400px; margin:auto; }
@media (max-width:768px){
  #tv_chart_container { height:300px; }
}
</style>
</head>
<body>
<div class="container">
<h2>üî• –°–∏–≥–Ω–∞–ª—ã Pocket Option</h2>

<select id="pairSelect">
<option>EUR/USD</option>
<option>GBP/USD</option>
<option>USD/JPY</option>
<option>AUD/USD</option>
<option>USD/CAD</option>
<option>NZD/USD</option>
<option>CHF/JPY</option>
<option>EUR/GBP</option>
</select>

<select id="tfSelect">
<option>1m</option>
<option>3m</option>
<option>5m</option>
</select>

<br>
<button id="getSignalBtn">–ü–æ–ª—É—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>
<button id="resetSignalBtn">–°–±—Ä–æ—Å–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>

<div class="signal-box" id="signalDisplay">
<p>–°–∏–≥–Ω–∞–ª –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
</div>

<h2>üìà –ì—Ä–∞—Ñ–∏–∫</h2>
<div id="tv_chart_container"></div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
// –î–µ–º–æ-—Å–∏–≥–Ω–∞–ª—ã
const demoSignals = [
    {entry:"1.0932", duration:60},
    {entry:"1.2720", duration:90},
    {entry:"145.60", duration:120},
    {entry:"0.7125", duration:75},
    {entry:"1.3350", duration:50}
];

let currentSignal = null;
let timerInterval = null;

const pairSelect = document.getElementById("pairSelect");
const tfSelect = document.getElementById("tfSelect");
const signalDisplay = document.getElementById("signalDisplay");
const getSignalBtn = document.getElementById("getSignalBtn");
const resetSignalBtn = document.getElementById("resetSignalBtn");

function startSignal(signal){
    currentSignal = signal;

    // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤—ã–±–æ—Ä –∏ –∫–Ω–æ–ø–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞
    getSignalBtn.disabled = true;
    pairSelect.disabled = true;
    tfSelect.disabled = true;

    const pair = pairSelect.value;
    const tf = tfSelect.value;
    const endTime = Date.now() + signal.duration*1000;

    function updateTimer(){
        const remaining = Math.max(0, Math.ceil((endTime - Date.now())/1000));
        if(remaining <= 0){
            clearInterval(timerInterval);
            const results = ["+","-","‚Ü∫"];
            const r = results[Math.floor(Math.random()*results.length)];
            let className = r==="+"?"signal-positive":r==="-"?"signal-negative":"signal-neutral";
            signalDisplay.innerHTML = `<p>–ü–∞—Ä–∞: ${pair} | TF: ${tf}</p>
                                       <p>–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: ${signal.entry}</p>
                                       <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: <span class="${className}">${r}</span></p>`;
        } else {
            signalDisplay.innerHTML = `<p>–ü–∞—Ä–∞: ${pair} | TF: ${tf}</p>
                                       <p>–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: ${signal.entry}</p>
                                       <p>–¢–∞–π–º–µ—Ä: 00:${remaining<10?'0':''+remaining}</p>`;
        }
    }

    updateTimer();
    timerInterval = setInterval(updateTimer, 1000);
}

// –ö–Ω–æ–ø–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞
getSignalBtn.addEventListener("click", ()=>{
    if(timerInterval) clearInterval(timerInterval);
    const randomSignal = demoSignals[Math.floor(Math.random()*demoSignals.length)];
    startSignal(randomSignal);
    loadTradingView();
});

// –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Å–∏–≥–Ω–∞–ª–∞
resetSignalBtn.addEventListener("click", ()=>{
    if(timerInterval) clearInterval(timerInterval);
    signalDisplay.innerHTML = "<p>–°–∏–≥–Ω–∞–ª –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>";
    currentSignal = null;

    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
    getSignalBtn.disabled = false;
    pairSelect.disabled = false;
    tfSelect.disabled = false;
});

// TradingView Widget
let tvWidget = null;
function loadTradingView(){
    const pair = pairSelect.value.replace("/","");
    const tf = tfSelect.value;
    if(tvWidget) tvWidget.remove();
    tvWidget = new TradingView.widget({
        "container_id": "tv_chart_container",
        "symbol": pair,
        "interval": tf,
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "ru",
        "toolbar_bg": "#1e293b",
        "enable_publishing": false,
        "hide_side_toolbar": false,
        "allow_symbol_change": true,
        "save_image": false
    });
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–∞—Ä—ã –∏–ª–∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞)
pairSelect.addEventListener("change", ()=>{ if(!currentSignal) loadTradingView(); });
tfSelect.addEventListener("change", ()=>{ if(!currentSignal) loadTradingView(); });

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
loadTradingView();
</script>
</body>
</html>
